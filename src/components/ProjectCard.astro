---
import type { Project } from "../data/projects";

interface Props {
  project: Project;
  index: number;
}

const { project, index } = Astro.props;
---

<article
  class="group glass glass-hover rounded-2xl overflow-hidden transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl hover:shadow-primary/10"
  style={`animation-delay: ${index * 0.1}s`}
>
  <div class="relative h-52 overflow-hidden">
    <div class={`absolute inset-0 bg-gradient-to-br ${project.color} opacity-80`}></div>
    <img
      src={project.image}
      alt={project.title}
      class="w-full h-full object-cover mix-blend-overlay opacity-60 group-hover:scale-110 transition-transform duration-700"
      loading="lazy"
      onerror="this.style.display='none'"
    />
    <div class="absolute inset-0 flex flex-col justify-end p-6">
      <span class="inline-block w-fit px-3 py-1 text-xs font-semibold uppercase tracking-wider bg-black/30 backdrop-blur-sm rounded-full text-white mb-3">
        {project.category}
      </span>
      <h3 class="text-2xl font-bold text-white">{project.title}</h3>
      <p class="text-white/80 text-sm">{project.subtitle}</p>
    </div>
  </div>

  <div class="p-6 space-y-4">
    <div class="flex items-center gap-2">
      <span class="text-xs font-mono text-primary-light bg-primary/10 px-3 py-1 rounded-full">
        {project.highlights}
      </span>
    </div>

    <p class="text-text-muted text-sm leading-relaxed line-clamp-3">
      {project.description}
    </p>

    <div class="space-y-2">
      <h4 class="text-xs font-semibold uppercase tracking-wider text-text-muted">Key Features</h4>
      <ul class="grid grid-cols-1 gap-1.5">
        {project.features.slice(0, 4).map((feature) => (
          <li class="flex items-start gap-2 text-xs text-text-muted">
            <svg class="w-3.5 h-3.5 text-primary-light mt-0.5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
            </svg>
            {feature}
          </li>
        ))}
      </ul>
    </div>

    <div class="flex flex-wrap gap-1.5 pt-2">
      {project.technologies.slice(0, 6).map((tech) => (
        <span class="px-2 py-0.5 text-[10px] font-mono text-text-muted bg-surface-lighter/50 rounded border border-border/30">
          {tech}
        </span>
      ))}
      {project.technologies.length > 6 && (
        <span class="px-2 py-0.5 text-[10px] font-mono text-text-muted bg-surface-lighter/50 rounded border border-border/30">
          +{project.technologies.length - 6} more
        </span>
      )}
    </div>

    <button
      data-open-project={project.id}
      class="inline-flex items-center gap-2 mt-2 px-5 py-2.5 bg-primary/10 hover:bg-primary/20 text-primary-light text-sm font-semibold rounded-xl border border-primary/20 hover:border-primary/40 transition-all duration-300 group/btn cursor-pointer"
    >
      View Details
      <svg class="w-3.5 h-3.5 transition-transform group-hover/btn:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
      </svg>
    </button>
  </div>
</article>
